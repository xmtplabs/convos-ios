// Development/TestFlight Configuration
// Note: This configuration uses Release-level optimizations for App Store compliance
// even though it's for TestFlight, as TestFlight builds must meet App Store requirements
CONFIG_FILE = config.dev.json
DEVELOPMENT_TEAM = FY4NZR34Z3

// Swift compiler flags - define DEBUG for conditional compilation (if needed for dev/testflight)
// Note: SWIFT_ACTIVE_COMPILATION_CONDITIONS propagates to Swift Package dependencies
// Comment out the line below if you don't want DEBUG in TestFlight builds
SWIFT_ACTIVE_COMPILATION_CONDITIONS = DEBUG

// Override Swift Package optimization for debugging
// This ensures ConvosCore and other Swift Packages are not optimized
OTHER_SWIFT_FLAGS = $(inherited) -Onone

// Bundle IDs for all targets
MAIN_BUNDLE_ID = org.convos.ios-preview
PRODUCT_BUNDLE_IDENTIFIER = $(MAIN_BUNDLE_ID)

// Target-specific bundle IDs (will be used in target build settings)
CONVOS_BUNDLE_ID = $(MAIN_BUNDLE_ID)
CONVOS_TESTS_BUNDLE_ID = $(MAIN_BUNDLE_ID).tests
CONVOS_APP_CLIP_BUNDLE_ID = $(MAIN_BUNDLE_ID).Clip
CONVOS_APP_CLIP_TESTS_BUNDLE_ID = $(MAIN_BUNDLE_ID).ConvosAppClipTests
CONVOS_APP_CLIP_UI_TESTS_BUNDLE_ID = $(MAIN_BUNDLE_ID).ConvosAppClipUITests
NOTIFICATION_SERVICE_BUNDLE_ID = $(MAIN_BUNDLE_ID).ConvosNSE

// Environment-specific entitlements
APP_GROUP_IDENTIFIER = group.$(MAIN_BUNDLE_ID)
ASSOCIATED_DOMAIN = dev.convos.org
WEB_CREDENTIALS_DOMAIN = dev.convos.org
SECONDARY_ASSOCIATED_DOMAIN = app-dev.convos.org
URL_SCHEME = convos-dev
KEYCHAIN_GROUP_IDENTIFIER = $(MAIN_BUNDLE_ID)
APP_DISPLAY_NAME = Convos Dev
APNS_ENVIRONMENT = production

// App Icon Configuration
ASSETCATALOG_COMPILER_APPICON_NAME = AppIcon-Dev

// Release-level build settings for App Store compliance (TestFlight)
// NOTE: Optimization is disabled to allow debugging. Re-enable for actual TestFlight builds.
// For debuggable Dev builds:
SWIFT_OPTIMIZATION_LEVEL = -Onone
ENABLE_TESTABILITY = YES
DEBUG_INFORMATION_FORMAT = dwarf

// For release-optimized TestFlight builds, use these instead:
// SWIFT_OPTIMIZATION_LEVEL = -O
// SWIFT_COMPILATION_MODE = wholemodule
// ENABLE_NS_ASSERTIONS = NO
// ENABLE_TESTABILITY = NO
// COPY_PHASE_STRIP = YES
// STRIP_INSTALLED_PRODUCT = YES
// STRIP_STYLE = all
// DEAD_CODE_STRIPPING = YES
// DEBUG_INFORMATION_FORMAT = dwarf-with-dsym
